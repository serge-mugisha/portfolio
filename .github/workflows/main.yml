# This workflow will do a clean installation of node dependencies, cache/restore them, build the source code and deploy to an ftp server

name: CI/CD ğŸš€ 

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
    - name: ğŸš¿ Get latest code ğŸš¿
      uses: actions/checkout@v3

    - name: ğŸŒŠ Use Node.js 18
      uses: actions/setup-node@v3
      with:
        node-version: "18"
        cache: 'npm'

    - name: ğŸª¨ Install dependencies ğŸª¨
      run: npm install

    - name: ğŸš§ Build ğŸš§
      run: npm run build

    - name: ğŸš€ FTP Deploy to Cpanel ğŸ“‚
      uses: SamKirkland/FTP-Deploy-Action@4.3.3
      with:
        server: ${{ secrets.FTP_HOSTNAME }}
        username: ${{ secrets.FTP_USERNAME }}
        password: ${{ secrets.FTP_PASSWORD }}
        local-dir: ./out/

